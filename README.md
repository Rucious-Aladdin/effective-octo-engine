# 퀀트투자 자동 리밸런싱

- 리밸런싱 하기 귀찮으시죠?
- 이 프로그램을 사용하면, 더이상 손으로 일일히 리밸런싱을 할 필요가 없습니다!

## 실행환경 준비

- 본 프로그램에는 데이터 분석 기능 및 네이버에서 주가정보를 크롤링하는 부분을 포함하고 있습니다.
- ```pandas```, ```beautifulsoup4```, ```numpy``` 등이 필요합니다.
- 자세한 내용은  requirements.txt를 참고해 설치하시기 바랍니다.

#### 실행 명령어(실행옵션은 하단을 참고하세요)
```sh
$ pip install -r requirements.txt
$ python main.py
```

## 데이터 준비

- 이 프로그램은 저의 다른 ```repository```인 ```quant_stock_investing``` 프로그램을 실행 후 생성되는 파일과 연동되어 작동하도록 구성되었습니다.
  
- 함께 사용하실 분들은 이링크를 참고하세요. 다만, 퀀트킹 데이터 전체를 제공하기는 어려운점 양해 부탁드립니다. 
  
- 데이터의 형식을 지키면, 퀀트킹 데이터를 사용하지 않아도 실행이 가능합니다.

- (2024년 4월 15일 기준) 필요한 data들을 준비하여 ```/data```폴더 내에 올려두었으니 참고하시기 바랍니다.

### quant_final.csv
- 4개의 column으로 이루어진 파일입니다.

- ```code```: 종목코드가 적혀있는 칼럼입니다. "A005930" 처럼 앞에 A를 적어주어야 제대로 작동하니 유의바랍니다.

- ```company_name```: 회사의 이름이 적혀있는 칼럼입니다.

- ```price``` : 평가기준 사용했던 금액입니다. 현재가와는 차이가 있다는점 유의 부탁드립니다. 물론, 현재가를 적어서 사용하셔도 무방하지만, 일부기능이 제대로 작동하지 않는다는 점 유의바랍니다.
  
- ```total_rank```: 각 주식의 우선순위가 부여된 칼럼입니다.

### current.txt

- 포트폴리오에 포함될 주식들을 적어주는 곳입니다.
- 보유중인 종목과, 보유중인 수량을 공백하나를 사이에 두시고 적어주시면 됩니다.

#### (file-example-1)
```
삼성전자 40
진도 50
카스 30
두산중공업 50
```
- 다음 리밸런싱때 포함될 종목, 포함되지 않을 종목들이 자동으로 계산되어 출력됩니다.
- (주의!) 오타가 있으면 안됩니다.
#### (file-example-2)
```
005930 40
088790 50
016920 30
031020 50
```
- 종목코드를 적는 형식도 가능합니다. 다만, 여기서는 데이터 생성시와는 다르게 "A"를 앞에 적지 않는다는 점을 명심해주세요!

- __형식을 통일해(종목코드만 적거나, 회사이름만 적거나)주셔야 합니다.__

### code_into_name.pickle 

- 2024년 상장된 종목들의 코드와 회사명을 저장하고 있는 딕셔너리 파일입니다.
- (ex) A005930 -> 삼성전자 처럼 종목코드를 회사명으로 바꾸어 줍니다.

## 실행 옵션(2024.04.17 기준 사용가능 옵션 목록)

- ```-i``` 또는 ```--invest_amount``` -> 포트폴리오에 해당하는 금액 입력, 기본값: 1e7(천만원)
- ```-n``` 또는 ```--stock_number``` -> 포트폴리오를 구성하는 종목수, 기본값: 25개
- ```-p``` 또는 ```--filepath``` -> datafile을 저장하는 path를 지정, 기본값: ```data/```
- ```-s``` 또는 ```--save_path```  -> 결과파일을 저장하는 path, 기본값: ```result/```
- ```-rk``` 또는 ```--sortbyrank``` -> total_rank를 데이터 정렬의 우선기준으로 선택
- ```-sv``` 또는 ```--visdf``` -> visualize 전용 dataframe을 저장하지 않는 옵션

## 결과 분석 및 파일 저장

#### 결과 보는 법

#### 파일 저장 형식

- 결과파일은 result폴더에 ```detailed_transcription.csv```, ```summarized_transcription.csv``` 두 파일로 저장됩니다.
- ```summarized_transcription.csv``` 파일이 요약된 버전이므로, 빠르게 사용하고 싶으신 분은 이 파일을 참고하시면 됩니다.



